<!doctype html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="Cost–benefit analysis and dashboard for PureVibe's IPL co-branding campaign (PowerSip & HappyGrow). Includes KPIs, contribution trends and cost breakdown." />
  <title>PureVibe IPL Financial Impact | PowerSip & HappyGrow</title>

  <!-- Tailwind CDN (quick prototyping) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <link rel="icon" href="data:;base64,iVBORw0KGgo=" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
    :root {
      --emerald: #10B981;
      --muted: #6B7280;
      --bg: #f7f7f6;
      --card: #ffffff;
      --accent: #3B82F6;
    }
    html,body { height:100%; }
    body {
      font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: var(--bg);
      color: #111827;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    .chart-container { position: relative; width: 100%; max-width: 900px; margin: 0 auto; height: 360px; }
    .chart-container-sm { position: relative; width: 100%; max-width: 520px; margin: 0 auto; height: 320px; }

    /* Print-friendly: show only key sections */
    @media print {
      header, nav, footer, .download-btn, .mobile-only { display: none !important; }
      body { background: #fff; color: #000; }
    }

    /* Focus outlines for keyboard users */
    a:focus, button:focus, select:focus { outline: 3px solid rgba(16,185,129,0.18); outline-offset: 2px; }
  </style>
</head>
<body>

  <!-- Skip link for accessibility -->
  <a class="sr-only focus:not-sr-only block p-2 m-2 bg-emerald-600 text-white rounded" href="#main">Skip to content</a>

  <!-- Header -->
  <header class="sticky top-0 z-40 bg-white/90 backdrop-blur-sm border-b border-gray-100">
    <div class="container mx-auto px-4 md:px-8">
      <nav class="flex items-center justify-between h-16" aria-label="Primary">
        <div class="flex items-center gap-4">
          <h1 class="text-lg sm:text-xl font-semibold text-emerald-600">PureVibe | IPL Analysis</h1>
          <p class="text-sm text-gray-500 hidden sm:inline">PowerSip &amp; HappyGrow — Jan–Jun</p>
        </div>

        <!-- Desktop links -->
        <div class="hidden md:flex items-center space-x-6">
          <a href="#home" class="text-gray-600 hover:text-emerald-600 font-medium">Summary</a>
          <a href="#problem" class="text-gray-600 hover:text-emerald-600 font-medium">Problem</a>
          <a href="#method" class="text-gray-600 hover:text-emerald-600 font-medium">Methodology</a>
          <a href="#findings" class="text-gray-600 hover:text-emerald-600 font-medium">Findings</a>
          <a href="#download" class="text-gray-600 hover:text-emerald-600 font-medium">Data</a>
        </div>

        <!-- Mobile: simple select nav -->
        <div class="md:hidden">
          <label for="mobile-nav" class="sr-only">Mobile navigation</label>
          <select id="mobile-nav" class="border rounded p-2 text-sm" aria-label="Mobile navigation">
            <option value="#home">Summary</option>
            <option value="#problem">Problem</option>
            <option value="#method">Methodology</option>
            <option value="#findings">Findings</option>
            <option value="#download">Data</option>
          </select>
        </div>
      </nav>
    </div>
  </header>

  <!-- Main content -->
  <main id="main" class="container mx-auto px-4 md:px-8 py-8 space-y-12">

    <!-- Executive summary -->
    <section id="home" class="space-y-6">
      <div class="bg-white rounded-xl shadow p-6 md:p-8">
        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-6">
          <div>
            <h2 class="text-2xl md:text-3xl font-bold">Bottom Line: Proceed (Net Impact)</h2>
            <p class="text-sm text-gray-600 mt-1 max-w-2xl">6-month projection for IPL co-branding shows strong positive net impact after advertising and design costs.</p>
          </div>

          <div class="flex gap-4 items-center">
            <button id="downloadCsv" class="download-btn inline-flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded shadow hover:bg-emerald-500 text-sm">Download CSV</button>
            <a href="#findings" class="inline-flex items-center gap-2 px-4 py-2 border rounded text-sm hover:bg-gray-50">See Findings</a>
          </div>
        </div>

        <!-- KPI cards -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">
          <div class="bg-white border rounded-lg p-5 shadow-sm">
            <h3 class="text-xs font-semibold text-gray-500 uppercase">Net Financial Impact</h3>
            <div class="mt-3 text-3xl font-bold text-emerald-600">+ ₹46.60M</div>
            <p class="text-xs text-gray-500 mt-1">Final incremental profit (Jan–Jun)</p>
          </div>
          <div class="bg-white border rounded-lg p-5 shadow-sm">
            <h3 class="text-xs font-semibold text-gray-500 uppercase">Incremental Contribution</h3>
            <div class="mt-3 text-3xl font-bold text-gray-800">₹86.61M</div>
            <p class="text-xs text-gray-500 mt-1">Benefit from price+volume changes</p>
          </div>
          <div class="bg-white border rounded-lg p-5 shadow-sm">
            <h3 class="text-xs font-semibold text-gray-500 uppercase">Incremental Costs</h3>
            <div class="mt-3 text-3xl font-bold text-red-600">₹40.01M</div>
            <p class="text-xs text-gray-500 mt-1">Ads + preparation + design</p>
          </div>
        </div>

        <!-- Summary chart -->
        <div class="mt-6 bg-gray-50 p-4 rounded">
          <h4 class="font-semibold mb-3">Project ROI: Benefit vs Cost (6-month total)</h4>
          <div class="chart-container-sm">
            <canvas id="summaryBarChart" aria-label="Bar chart showing incremental benefit, total cost and net impact" role="img"></canvas>
          </div>
        </div>
      </div>
    </section>

    <!-- Problem -->
    <section id="problem">
      <div class="bg-white rounded-xl shadow p-6 md:p-8">
        <h3 class="text-xl font-semibold">The Business Problem</h3>
        <p class="mt-3 text-gray-600">PureVibe planned IPL-themed packaging and increased ad spend to drive sales. Finance wanted a robust cost–benefit assessment: do the benefits outweigh the costs?</p>

        <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-6">
          <ul class="list-disc pl-5 text-gray-700">
            <li>Increase sales volume for PowerSip &amp; HappyGrow</li>
            <li>Raise prices slightly during IPL (value capture)</li>
            <li>Invest in packaging and advertising</li>
          </ul>
          <p class="text-gray-600">Core question: After factoring in advertising and packaging costs, is the campaign profitable across regions and months?</p>
        </div>
      </div>
    </section>

    <!-- Method -->
    <section id="method">
      <div class="bg-white rounded-xl shadow p-6 md:p-8">
        <h3 class="text-xl font-semibold">Methodology — 3 Phases</h3>
        <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="p-4 border rounded">
            <h4 class="font-semibold">Phase 1: Data Cleaning (ETL)</h4>
            <p class="text-sm text-gray-600 mt-2">Parsed raw text records into structured tables (Month, Region, City, Product, Old/ New quantity).</p>
          </div>
          <div class="p-4 border rounded">
            <h4 class="font-semibold">Phase 2: Financial Modeling</h4>
            <p class="text-sm text-gray-600 mt-2">Built contribution models: Revenue - Variable Costs for both Old and New plans (packing, processing, material costs).</p>
          </div>
          <div class="p-4 border rounded">
            <h4 class="font-semibold">Phase 3: CBA</h4>
            <p class="text-sm text-gray-600 mt-2">Computed incremental contribution, offset by ad and design costs to get final incremental profit.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Findings -->
    <section id="findings" class="space-y-6">
      <div class="bg-white rounded-xl shadow p-6 md:p-8">
        <h3 class="text-xl font-semibold">Finding 1 — Contribution Trend</h3>
        <p class="text-sm text-gray-600 mt-1">The New Plan steadily outperforms the Old Plan; the gap widens month-over-month.</p>
        <div class="chart-container mt-4" role="img" aria-label="Line chart showing monthly contribution for new plan and old plan">
          <canvas id="contributionLineChart"></canvas>
        </div>
      </div>

      <div class="bg-white rounded-xl shadow p-6 md:p-8">
        <h3 class="text-xl font-semibold">Finding 2 — Incremental Cost Breakdown</h3>
        <p class="text-sm text-gray-600 mt-1">Most incremental cost is advertising; one-time costs are much smaller.</p>
        <div class="chart-container-sm mt-4">
          <canvas id="costDonutChart" aria-label="Donut chart showing cost components"></canvas>
        </div>
      </div>
    </section>

    <!-- Data / Download anchor -->
    <section id="download" class="bg-white rounded-xl shadow p-6 md:p-8">
      <h3 class="text-lg font-semibold">Data</h3>
      <p class="text-sm text-gray-600 mt-2">You can download a small CSV snapshot of the summary numbers used to render charts.</p>
      <pre class="mt-3 text-xs bg-gray-50 p-3 rounded overflow-auto"><code id="csvPreview"></code></pre>
    </section>

  </main>

  <footer class="text-center py-6 text-sm text-gray-500 border-t border-gray-100">
    PureVibe Co. &middot; IPL Campaign Analysis &middot; Created by Tanmay
  </footer>

  <!-- Script: data + charts -->
  <script>
    // Basic navigation handlers
    document.querySelector('#mobile-nav')?.addEventListener('change', function(e){
      const id = e.target.value;
      const el = document.querySelector(id);
      if (el) el.scrollIntoView({behavior:'smooth'});
    });
    document.querySelectorAll('header a[href^="#"]').forEach(a=>{
      a.addEventListener('click', e=>{
        e.preventDefault();
        const id = a.getAttribute('href');
        document.querySelector(id)?.scrollIntoView({behavior:'smooth'});
      });
    });

    // ---------- Data (summary) ----------
    const summaryData = {
      labels: ['Incremental Benefit', 'Total Cost', 'Net Impact'],
      values: [86613477, 40010000, 46603477],
      colors: ['#10B981', '#EF4444', '#3B82F6']
    };

    const contributionData = {
      labels: ['January','February','March','April','May','June'],
      oldPlan: [33769678.89, 36856628.21, 40232112.22, 43923260.15, 47960309.6, 52376137.98],
      newPlan: [39957792.12, 45981863.96, 51788976.48, 59140498.18, 67713063.77, 77149409.36]
    };

    const costData = {
      labels: ['Incremental Advertising','Ads Preparation','New Design'],
      values: [30000000, 10000000, 10000],
      colors: ['#3B82F6','#F97316','#9CA3AF']
    };

    // Helper: Indian currency formatting for ticks & tooltips
    function formatINR(n) {
      const abs = Math.abs(n);
      if (abs >= 1e7) return '₹' + (n/1e7).toFixed(2) + ' Cr'; // Crore
      if (abs >= 1e5) return '₹' + (n/1e5).toFixed(2) + ' L'; // Lakh
      if (abs >= 1e3) return '₹' + (n/1e3).toFixed(0) + 'K';
      return '₹' + n.toFixed(0);
    }

    // Chart global options
    const baseOptions = {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        tooltip: {
          callbacks: {
            label: (ctx) => {
              const v = ctx.raw ?? ctx.parsed ?? ctx;
              return `${ctx.dataset.label ? ctx.dataset.label + ': ' : ''}${formatINR(v)}`;
            }
          }
        },
        legend: { labels: { boxWidth: 12, padding: 16 } }
      },
      interaction: { mode: 'nearest', intersect: false }
    };

    // --- Summary Bar Chart ---
    const ctxSummary = document.getElementById('summaryBarChart').getContext('2d');
    new Chart(ctxSummary, {
      type: 'bar',
      data: {
        labels: summaryData.labels,
        datasets: [{
          data: summaryData.values,
          backgroundColor: summaryData.colors,
          borderRadius: 6
        }]
      },
      options: {
        ...baseOptions,
        plugins: { ...baseOptions.plugins, legend:{display:false} },
        scales: {
          y: {
            beginAtZero: true,
            ticks: { callback: (v)=> formatINR(v) }
          }
        }
      }
    });

    // --- Contribution Line Chart ---
    const ctxContribution = document.getElementById('contributionLineChart').getContext('2d');
    new Chart(ctxContribution, {
      type: 'line',
      data: {
        labels: contributionData.labels,
        datasets: [
          {
            label: 'New Plan Contribution',
            data: contributionData.newPlan,
            borderColor: '#10B981',
            tension: 0.2,
            pointRadius: 4,
            pointHoverRadius: 6,
            backgroundColor: 'rgba(16,185,129,0.06)',
            fill: true
          },
          {
            label: 'Old Plan Contribution',
            data: contributionData.oldPlan,
            borderColor: '#6B7280',
            tension: 0.2,
            pointRadius: 4,
            pointHoverRadius: 6,
            backgroundColor: 'rgba(107,114,128,0.04)',
            fill: true
          }
        ]
      },
      options: {
        ...baseOptions,
        plugins: {
          ...baseOptions.plugins,
          title: { display: true, text: 'Monthly Contribution: New Plan vs Old Plan', padding: 8 }
        },
        scales: { y: { ticks: { callback: (v)=> formatINR(v) } } }
      }
    });

    // --- Cost Donut Chart ---
    const ctxCost = document.getElementById('costDonutChart').getContext('2d');
    new Chart(ctxCost, {
      type: 'doughnut',
      data: {
        labels: costData.labels,
        datasets: [{
          data: costData.values,
          backgroundColor: costData.colors
        }]
      },
      options: {
        ...baseOptions,
        plugins: {
          ...baseOptions.plugins,
          title: { display: true, text: 'Incremental Cost Breakdown', padding: 8 }
        }
      }
    });

    // ---------- CSV download & preview ----------
    // Simple CSV derived from summary + contribution + cost data
    function toCSV() {
      // Header rows
      const lines = [];
      lines.push(['Metric','Value']);
      lines.push(['Net Incremental Profit', 46603477]);
      lines.push(['Incremental Contribution', 86613477]);
      lines.push(['Incremental Costs', 40010000]);
      lines.push([]);
      lines.push(['Month','Old Contribution','New Contribution']);
      contributionData.labels.forEach((m, i) => {
        lines.push([m, contributionData.oldPlan[i], contributionData.newPlan[i]]);
      });
      lines.push([]);
      lines.push(['Cost Component','Amount']);
      costData.labels.forEach((l, i) => lines.push([l, costData.values[i]]));
      return lines.map(r => r.join(',')).join('\n');
    }

    const csvText = toCSV();
    document.getElementById('csvPreview').textContent = csvText;

    document.getElementById('downloadCsv').addEventListener('click', () => {
      const blob = new Blob([csvText], {type: 'text/csv;charset=utf-8;'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'purevibe_summary.csv';
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    });

    // Improve keyboard/mobile accessibility: ensure focusable canvas
    document.querySelectorAll('canvas').forEach(c => c.setAttribute('tabindex', 0));
  </script>
</body>
</html>
